!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n.p,n.p,n.p,n.p,n.p,n.p;var r={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".button_save",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_active"},o="https://mesto.nomoreparties.co/v1/cohort-17/",i="26855ddc-0b32-46bf-95f9-95a4c6a68cde",c={cardsSelector:".cards",cardTplSelector:".js-card-item-template",cardTitleSelector:".card-item__title",cardPicSelector:".card-item__pic",cardLikeBtnSelector:".button_like",cardLikeCountSelector:".card-item__like-count",cardDeleteBtnSelector:".js-card-delete",popupOpenedSelector:".popup_opened",popupProfileSelector:".js-popup-profile",popupNewCardSelector:".js-popup-card",popupPreviewSelector:".js-popup-place",popupConfirmSelector:".js-popup-areyousure",popupAvatarSelector:".js-popup-avatar",formProfileSelector:".js-form-profile",formCardSelector:".js-form-card",formConfirmSelector:".js-form-areyousure",formAvatarSelector:".js-form-avatar",previewImageSelector:".preview__image",previewTitleSelector:".preview__title",buttonEditProfileSelector:".button_edit",buttonAddCardSelector:".button_add",buttonEditAvatarSelector:".js-edit-avatar",buttonSaveSelector:".button_save",buttonSaveDisabled:".button_disabled",inputProfileNameSelector:".form__profile-name",inputProfileInfoSelector:".form__profile-job",inputProfileAvatarSelector:".form__avatar-url",profileNameSelector:".profile__person",profileAboutSelector:".profile__job",profileAvatarSelector:".profile__avatar"};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url,this.headers=t.headers}var t,n,r;return t=e,(n=[{key:"getCards",value:function(){var e=this;return fetch("".concat(this.url,"cards"),{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка получения карточек: ".concat(e.status))})).then((function(e){return e})).catch((function(t){return e._displayErr(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.url,"users/me"),{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка получения информации о пользователе: ".concat(e.status))})).then((function(e){return e})).catch((function(t){return e._displayErr(t)}))}},{key:"updateUserInfo",value:function(e,t){var n=this;return fetch("".concat(this.url,"users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка добавления информации о пользователе: ".concat(e.status))})).then((function(e){return e})).catch((function(e){return n._displayErr(e)}))}},{key:"createNewPlace",value:function(e,t){var n=this;return fetch("".concat(this.url,"cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка добавления новой карточки: ".concat(e.status))})).then((function(e){return e})).catch((function(e){return n._displayErr(e)}))}},{key:"deleteMyPlace",value:function(e){var t=this;return fetch("".concat(this.url,"cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка удаления карточки ".concat(e," карточки: ").concat(t.status))})).then((function(e){return e})).catch((function(e){return t._displayErr(e)}))}},{key:"likeCard",value:function(e,t){var n=this;return fetch("".concat(this.url,"cards/likes/").concat(e),{method:t,headers:this.headers}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка лайканья ".concat(e," карточки: ").concat(t.status))})).then((function(e){return e})).catch((function(e){return n._displayErr(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this.url,"users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка замены аватара: ".concat(e.status))})).then((function(e){return e})).catch((function(e){return t._displayErr(e)}))}},{key:"_displayErr",value:function(e){alert(e)}}])&&a(t.prototype,n),r&&a(t,r),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=t.name,this._infoSelector=t.info,this._avatarSelector=t.avatar,this._name=document.querySelector(this._nameSelector),this._info=document.querySelector(this._infoSelector),this._avatar=document.querySelector(this._avatarSelector)}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,info:this._info.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(e,t){this._name.textContent=e,this._info.textContent=t}},{key:"initUserInfo",value:function(e){this.setUserInfo(e.name,e.about),this._avatar.src=e.avatar,this._avatar.alt=e.name,this.id=e._id}}])&&s(t.prototype,n),r&&s(t,r),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=r,this._renderer=o,this._selector=n,this._container=document.querySelector(this._selector)}var t,n,r;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this.items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.appendChild(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}}])&&f(t.prototype,n),r&&f(t,r),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selector=t,this._element=document.querySelector(this._selector),this._closeBtnSelector=".button_close",this._handleEscClose=this._handleEscClose.bind(this)}var t,n,r;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._element.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListener",value:function(){var e=this;this._element.addEventListener("mousedown",(function(t){t.target.classList.contains(e._selector.slice(1))&&e.close()})),this._element.querySelector(this._closeBtnSelector).addEventListener("click",(function(){e.close()}))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}}])&&p(t.prototype,n),r&&p(t,r),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r,o=m(i);function i(e,t,n){var r,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(c=o.call(this,e))._iamge=document.querySelector(n),c._name=document.querySelector(t),k((r=S(c),g(i.prototype)),"setEventListener",r).call(r),c}return t=i,(n=[{key:"open",value:function(e,t){this._iamge.src=e,this._name.textContent=t,this._iamge.alt=t,k(g(i.prototype),"open",this).call(this)}}])&&v(t.prototype,n),r&&v(t,r),i}(d);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(i,e);var t,n,r,o=O(i);function i(e,t){var n,r=e.selector,c=e.submitFnc;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,r))._submitFnc=c,n._form=document.querySelector(t),n.setEventListener(),n}return t=i,(n=[{key:"setEventListener",value:function(){var e=this;E(I(i.prototype),"setEventListener",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submit()}))}},{key:"_submit",value:function(){this._submitFnc(this._idCard)}},{key:"open",value:function(e){this._idCard=e,E(I(i.prototype),"open",this).call(this)}}])&&j(t.prototype,n),r&&j(t,r),i}(d);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t,n,r,o,i,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._myId=t,this._name=n.name,this._link=n.link,this._likeCount=0,this._ownerId=n.owner._id,this._idCard=n._id,this.likesObj=n.likes,this._likeCount=n.likes.length,this._handleCardClick=o,this._handleCardDelete=i,this._handleCardLike=c,this._selector=r.cardTplSelector,this._cardTitleSelector=r.cardTitleSelector,this._cardPicSelector=r.cardPicSelector,this._cardLikeBtnSelector=r.cardLikeBtnSelector,this._cardLikeCountSelector=r.cardLikeCountSelector,this._cardDeleteBtnSelector=r.cardDeleteBtnSelector}var t,n,r;return t=e,(n=[{key:"hasMyLike",value:function(){var e=this;return!!Object.values(this.likesObj).some((function(t){return t._id===e._myId}))}},{key:"create",value:function(){return this._element=this._getCardTemplate(),this._element.id=this._idCard,this._element.querySelector(this._cardPicSelector).src=this._link,this._element.querySelector(this._cardTitleSelector).textContent=this._name,this._element.querySelector(this._cardLikeCountSelector).textContent=this._likeCount,this._itsMyCard()||this._element.querySelector(this._cardDeleteBtnSelector).classList.add("button_visibility_hidden"),this.hasMyLike()&&this._like(),this._setEventListeners(),this._element}},{key:"_like",value:function(){this._element.querySelector(this._cardLikeBtnSelector).classList.toggle("button_like-isset")}},{key:"setLikeCount",value:function(e){this._element.querySelector(this._cardLikeCountSelector).textContent=e}},{key:"_getCardTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card-item").cloneNode(!0)}},{key:"_itsMyCard",value:function(){return this._myId===this._ownerId}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".button_like").addEventListener("click",(function(t){e._handleCardLike(),e._like()})),this._element.querySelector(".card-item__pic").addEventListener("click",(function(){e._handleCardClick()})),this._element.querySelector(".js-card-delete").addEventListener("click",(function(){e._handleCardDelete()}))}}])&&T(t.prototype,n),r&&T(t,r),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._formSelector=n,this._form=document.querySelector(this._formSelector)}var t,n,r;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._disableSaveBtn()})),this._setEventListeners()}},{key:"_disableSaveBtn",value:function(){var e=this._form.querySelector(this._settings.submitButtonSelector);e.classList.add(this._settings.inactiveButtonClass),e.disabled=!0}},{key:"_setEventListeners",value:function(){var e=this;this._inputs=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._saveBtn=this._form.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputs.forEach((function(t){t.addEventListener("input",(function(){e._checkValidity(t),e._toggleButtonState()}))}))}},{key:"_inputIsValid",value:function(e){return e.validity.valid}},{key:"_checkValidity",value:function(e){this._inputIsValid(e)?this._hideInputError(e):this._showInputError(e)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputs)?(this._saveBtn.classList.add(this._settings.inactiveButtonClass),this._saveBtn.disabled=!0):(this._saveBtn.classList.remove(this._settings.inactiveButtonClass),this._saveBtn.removeAttribute("disabled"))}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e){var t=e.id,n=document.querySelector("#".concat(t,"-error"));n.textContent=e.validationMessage,n.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=e.id,n=document.querySelector("#".concat(t,"-error"));n.textContent="",n.classList.remove(this._settings.errorClass),e.classList.remove(this._settings.inputErrorClass)}}])&&B(t.prototype,n),r&&B(t,r),e}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,n,r,o=V(i);function i(e,t){var n,r=e.selector,c=e.submitFnc;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,r))._submitFnc=c,n._form=document.querySelector(t),n.setEventListener(),n}return t=i,(n=[{key:"open",value:function(){U(F(i.prototype),"open",this).call(this)}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".form__input"),this._formValues=[],this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListener",value:function(){var e=this;U(F(i.prototype),"setEventListener",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submit()}))}},{key:"_submit",value:function(){var e=this._getInputValues();this._submitFnc(e)}},{key:"close",value:function(){this._form.reset(),U(F(i.prototype),"close",this).call(this)}}])&&D(t.prototype,n),r&&D(t,r),i}(d);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=document.querySelector(c.buttonEditProfileSelector),G=document.querySelector(c.buttonAddCardSelector),K=document.querySelector(c.buttonEditAvatarSelector),Q=document.querySelector(c.inputProfileNameSelector),W=document.querySelector(c.inputProfileInfoSelector),X=document.querySelector(c.inputProfileAvatarSelector),Y=new u({url:o,headers:{authorization:i,"Content-Type":"application/json"}});function Z(e){var t=document.querySelector(c.popupOpenedSelector).querySelector(c.buttonSaveSelector);t.textContent=e,"Сохранение..."===e?(t.disabled=!0,t.classList.add(c.buttonSaveDisabled.slice(1))):(t.disabled=!1,t.classList.remove(c.buttonSaveDisabled.slice(1)))}var ee=new l({name:c.profileNameSelector,info:c.profileAboutSelector,avatar:c.profileAvatarSelector});function te(){Y.getUserInfo().then((function(e){ee.initUserInfo(e)}))}var ne=new h({items:{},renderer:function(e){var t=re(e);ne.addItem(t)}},c.cardsSelector);function re(e){var t=new A(ee.id,e,c,(function(t){oe.open(e.link,e.name)}),(function(t){ie.open(e._id)}),(function(n){t.hasMyLike()?Y.likeCard(e._id,"DELETE").then((function(e){t.setLikeCount(e.likes.length),t.likesObj=e.likes})):Y.likeCard(e._id,"PUT").then((function(e){t.setLikeCount(e.likes.length),t.likesObj=e.likes}))}));return t.create()}var oe=new w(c.popupPreviewSelector,c.previewTitleSelector,c.previewImageSelector),ie=new q({selector:c.popupConfirmSelector,submitFnc:function(e){Z("Сохранение..."),Y.deleteMyPlace(e).then((function(t){if(!t.message)return new Promise.reject("Ошибка удаления");var n=document.getElementById(e);n.classList.toggle("card-item_closed"),n.addEventListener("transitionend",(function(){n.remove(),n=null}))})).finally((function(e){Z("Да"),ie.close()}))}},c.formConfirmSelector),ce=new J({selector:c.popupProfileSelector,submitFnc:function(e){Z("Сохранение..."),Y.updateUserInfo(e.name,e.info).then((function(e){te()})).finally((function(e){Z("Сохранить"),ce.close()}))}},c.formProfileSelector),ae=new J({selector:c.popupNewCardSelector,submitFnc:function(e){Z("Сохранение..."),Y.createNewPlace(e.name,e.link).then((function(e){var t=re(e);ne.prependItem(t)})).finally((function(e){Z("Сохранить"),ae.close()}))}},c.formCardSelector),ue=new J({selector:c.popupAvatarSelector,submitFnc:function(e){Z("Сохранение..."),Y.changeAvatar(e.link).then((function(e){te()})).finally((function(e){Z("Сохранить"),ue.close()}))}},c.formAvatarSelector);Promise.all([Y.getUserInfo(),Y.getCards()]).then((function(e){var t=H(e,2),n=t[0],r=t[1];ee.initUserInfo(n),ne.items=r,ne.renderItems()})).catch((function(e){alert("Внимание! При загузке данных произошла ошибка: ".concat(e.message()))})),G.addEventListener("click",(function(e){ae.open()})),$.addEventListener("click",(function(e){var t=ee.getUserInfo();Q.value=t.name,Q.focus(),W.value=t.info,ce.open()})),K.addEventListener("click",(function(e){var t=ee.getUserInfo();X.value=t.avatar,ue.open()})),new R(r,c.formProfileSelector).enableValidation(),new R(r,c.formAvatarSelector).enableValidation(),new R(r,c.formCardSelector).enableValidation()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9waG90bzEuanBnIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvcGhvdG8yLmpwZyIsIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3Bob3RvMy5qcGciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9waG90bzQuanBnIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvcGhvdG81LnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3Bob3RvNi5qcGciLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ2YWxpZGF0b3JTZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiYXBpU2V0dGluZ3MiLCJzZWxlY3RvcnNTZXR0aW5ncyIsImNhcmRzU2VsZWN0b3IiLCJjYXJkVHBsU2VsZWN0b3IiLCJjYXJkVGl0bGVTZWxlY3RvciIsImNhcmRQaWNTZWxlY3RvciIsImNhcmRMaWtlQnRuU2VsZWN0b3IiLCJjYXJkTGlrZUNvdW50U2VsZWN0b3IiLCJjYXJkRGVsZXRlQnRuU2VsZWN0b3IiLCJwb3B1cE9wZW5lZFNlbGVjdG9yIiwicG9wdXBQcm9maWxlU2VsZWN0b3IiLCJwb3B1cE5ld0NhcmRTZWxlY3RvciIsInBvcHVwUHJldmlld1NlbGVjdG9yIiwicG9wdXBDb25maXJtU2VsZWN0b3IiLCJwb3B1cEF2YXRhclNlbGVjdG9yIiwiZm9ybVByb2ZpbGVTZWxlY3RvciIsImZvcm1DYXJkU2VsZWN0b3IiLCJmb3JtQ29uZmlybVNlbGVjdG9yIiwiZm9ybUF2YXRhclNlbGVjdG9yIiwicHJldmlld0ltYWdlU2VsZWN0b3IiLCJwcmV2aWV3VGl0bGVTZWxlY3RvciIsImJ1dHRvbkVkaXRQcm9maWxlU2VsZWN0b3IiLCJidXR0b25BZGRDYXJkU2VsZWN0b3IiLCJidXR0b25FZGl0QXZhdGFyU2VsZWN0b3IiLCJidXR0b25TYXZlU2VsZWN0b3IiLCJidXR0b25TYXZlRGlzYWJsZWQiLCJpbnB1dFByb2ZpbGVOYW1lU2VsZWN0b3IiLCJpbnB1dFByb2ZpbGVJbmZvU2VsZWN0b3IiLCJpbnB1dFByb2ZpbGVBdmF0YXJTZWxlY3RvciIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlQWJvdXRTZWxlY3RvciIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsIkFwaSIsImNvbmZpZyIsInRoaXMiLCJ1cmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInJlc3VsdCIsImVyciIsIl9kaXNwbGF5RXJyIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxpbmsiLCJpZCIsImF2YXRhclVybCIsImF2YXRhciIsImFsZXJ0IiwiVXNlckluZm8iLCJzZWxlY3RvcnMiLCJfbmFtZVNlbGVjdG9yIiwiX2luZm9TZWxlY3RvciIsImluZm8iLCJfYXZhdGFyU2VsZWN0b3IiLCJfbmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9pbmZvIiwiX2F2YXRhciIsInRleHRDb250ZW50Iiwic3JjIiwiZGF0YSIsInNldFVzZXJJbmZvIiwiYWx0IiwiX2lkIiwiU2VjdGlvbiIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9zZWxlY3RvciIsIl9jb250YWluZXIiLCJmb3JFYWNoIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInByZXBlbmQiLCJQb3B1cCIsIl9lbGVtZW50IiwiX2Nsb3NlQnRuU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwic2xpY2UiLCJjbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwidGl0bGUiLCJfaWFtZ2UiLCJQb3B1cFdpdGhDb25maXJtIiwic3VibWl0Rm5jIiwiX3N1Ym1pdEZuYyIsIl9mb3JtIiwic2V0RXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiX3N1Ym1pdCIsIl9pZENhcmQiLCJDYXJkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImhhbmRsZUNhcmRMaWtlIiwiX215SWQiLCJfbGluayIsIl9saWtlQ291bnQiLCJfb3duZXJJZCIsIm93bmVyIiwibGlrZXNPYmoiLCJsaWtlcyIsImxlbmd0aCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9oYW5kbGVDYXJkTGlrZSIsIl9jYXJkVGl0bGVTZWxlY3RvciIsIl9jYXJkUGljU2VsZWN0b3IiLCJfY2FyZExpa2VCdG5TZWxlY3RvciIsIl9jYXJkTGlrZUNvdW50U2VsZWN0b3IiLCJfY2FyZERlbGV0ZUJ0blNlbGVjdG9yIiwidmFsdWVzIiwic29tZSIsIl9nZXRDYXJkVGVtcGxhdGUiLCJfaXRzTXlDYXJkIiwiaGFzTXlMaWtlIiwiX2xpa2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0b2dnbGUiLCJjb3VudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJfc2V0dGluZ3MiLCJfZm9ybVNlbGVjdG9yIiwiX2Rpc2FibGVTYXZlQnRuIiwic2F2ZUJ0biIsImRpc2FibGVkIiwiX2lucHV0cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc2F2ZUJ0biIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0RWxlbWVudCIsIl9jaGVja1ZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9pbnB1dElzVmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXRJZCIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiUG9wdXBXaXRoRm9ybSIsImZvcm0iLCJfaW5wdXRMaXN0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsImZvcm1WYWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImVkaXRCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiZWRpdEF2YXRhckJ1dHRvbiIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiYXZhdGFySW5wdXQiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiY2hhbmdlQnRuTGFiZWwiLCJuZXdMYWJlbCIsImNoYW5nZUJ0biIsInVzZXJJbmZvIiwiaW5pdFVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJpbnNDYXJkcyIsIm5ld0NhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJuZXdDYXJkIiwicG9wdXBQbGFjZSIsIm9wZW4iLCJwb3B1cENvbmZpcm0iLCJsaWtlQ2FyZCIsInNldExpa2VDb3VudCIsImRlbGV0ZU15UGxhY2UiLCJtZXNzYWdlIiwiZGVsZXRlRUxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwicG9wdXBQcm9maWxlIiwidXBkYXRlVXNlckluZm8iLCJwb3B1cE5ld0NhcmQiLCJjcmVhdGVOZXdQbGFjZSIsInByZXBlbmRJdGVtIiwicG9wdXBBdmF0YXIiLCJjaGFuZ2VBdmF0YXIiLCJhbGwiLCJnZXRDYXJkcyIsInVzZXJEYXRhIiwiaW5pdGlhbENhcmRzIiwicmVuZGVySXRlbXMiLCJmb2N1cyIsImVuYWJsZVZhbGlkYXRpb24iXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFB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YUFJckJuRyxFQUFrQmUsa0JBR2RpTSxHQUFjLElBQUl6QyxFQUN0QixDQUNFNUYsU0FBVTNFLEVBQWtCYSxvQkFDNUIyRixVQUFXLFNBQUMvSCxHQUNWOE0sRUFBZSxpQkFDZkYsRUFDRzRCLGFBQWF4TyxFQUFNMkUsTUFDbkJmLE1BQUssU0FBQ0MsR0FDTHFKLFFBSEosU0FLVyxTQUFDaEosR0FDUjRJLEVBQWUsYUFDZnlCLEdBQVk3RyxhQUlwQm5HLEVBQWtCaUIsb0JBdElsQndCLFFBQVF5SyxJQUFJLENBQUM3QixFQUFJTyxjQUFlUCxFQUFJOEIsYUFDakM5SyxNQUFLLFlBQThCLGFBQTVCK0ssRUFBNEIsS0FBbEJDLEVBQWtCLEtBQ2xDM0IsR0FBU0MsYUFBYXlCLEdBRXRCdkIsR0FBU2pILE1BQVF5SSxFQUNqQnhCLEdBQVN5QixpQkFMYixPQU9TLFNBQUN6SyxHQUNOVyxNQUFNLGtEQUFELE9BQW1EWCxFQUFJMkosZUFrSWhFeEIsRUFBY3BGLGlCQUFpQixTQUFTLFNBQUNHLEdBQ3ZDOEcsR0FBYVYsVUFHZnBCLEVBQVduRixpQkFBaUIsU0FBUyxTQUFDRyxHQUNwQyxJQUFNNkYsRUFBY0YsR0FBU0UsY0FDN0JWLEVBQVV6TSxNQUFRbU4sRUFBWTdOLEtBQzlCbU4sRUFBVXFDLFFBQ1ZwQyxFQUFTMU0sTUFBUW1OLEVBQVkvSCxLQUM3QjhJLEdBQWFSLFVBR2ZsQixFQUFpQnJGLGlCQUFpQixTQUFTLFNBQUNHLEdBQzFDLElBQU02RixFQUFjRixHQUFTRSxjQUM3QlIsRUFBWTNNLE1BQVFtTixFQUFZckksT0FDaEN5SixHQUFZYixVQVFRLElBQUlyRCxFQUMxQnRKLEVBQ0FRLEVBQWtCYyxxQkFFSjBNLG1CQUVPLElBQUkxRSxFQUN6QnRKLEVBQ0FRLEVBQWtCaUIsb0JBRUR1TSxtQkFFTSxJQUFJMUUsRUFBY3RKLEVBQW1CUSxFQUFrQmUsa0JBQy9EeU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCIuL2ltYWdlcy9waG90bzEuanBnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIi4vaW1hZ2VzL3Bob3RvMi5qcGdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiLi9pbWFnZXMvcGhvdG8zLmpwZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCIuL2ltYWdlcy9waG90bzQuanBnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIi4vaW1hZ2VzL3Bob3RvNS5wbmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiLi9pbWFnZXMvcGhvdG82LmpwZ1wiOyIsImltcG9ydCBwaWMxIGZyb20gXCIuLi9pbWFnZXMvcGhvdG8xLmpwZ1wiO1xuaW1wb3J0IHBpYzIgZnJvbSBcIi4uL2ltYWdlcy9waG90bzIuanBnXCI7XG5pbXBvcnQgcGljMyBmcm9tIFwiLi4vaW1hZ2VzL3Bob3RvMy5qcGdcIjtcbmltcG9ydCBwaWM0IGZyb20gXCIuLi9pbWFnZXMvcGhvdG80LmpwZ1wiO1xuaW1wb3J0IHBpYzUgZnJvbSBcIi4uL2ltYWdlcy9waG90bzUucG5nXCI7XG5pbXBvcnQgcGljNiBmcm9tIFwiLi4vaW1hZ2VzL3Bob3RvNi5qcGdcIjtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwi0JDQu9GC0LDQuVwiLFxuICAgIGxpbms6IHBpYzEsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCa0YDRi9C8XCIsXG4gICAgbGluazogcGljMixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0KLQtdGA0LjQsdC10YDQutCwXCIsXG4gICAgbGluazogcGljMyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0JrQsNC70LjQvdC40L3Qs9GA0LDQtFwiLFxuICAgIGxpbms6IHBpYzQsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCa0LDQvNGH0LDRgtC60LBcIixcbiAgICBsaW5rOiBwaWM1LFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLQkdCw0YjQutC40YDQuNGPXCIsXG4gICAgbGluazogcGljNixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0b3JTZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5idXR0b25fc2F2ZVwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX2FjdGl2ZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGFwaVNldHRpbmdzID0ge1xuICB1cmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNy9cIixcbiAgaGVhZGVyczogJ0NvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uJyxcbiAgdG9rZW46IFwiMjY4NTVkZGMtMGIzMi00NmJmLTk1ZjktOTVhNGM2YTY4Y2RlXCIsXG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzU2V0dGluZ3MgPSB7XG4gIGNhcmRzU2VsZWN0b3I6IFwiLmNhcmRzXCIsXG4gIGNhcmRUcGxTZWxlY3RvcjogXCIuanMtY2FyZC1pdGVtLXRlbXBsYXRlXCIsXG4gIGNhcmRUaXRsZVNlbGVjdG9yOiBcIi5jYXJkLWl0ZW1fX3RpdGxlXCIsXG4gIGNhcmRQaWNTZWxlY3RvcjogXCIuY2FyZC1pdGVtX19waWNcIixcbiAgY2FyZExpa2VCdG5TZWxlY3RvcjogXCIuYnV0dG9uX2xpa2VcIixcbiAgY2FyZExpa2VDb3VudFNlbGVjdG9yOiBcIi5jYXJkLWl0ZW1fX2xpa2UtY291bnRcIixcbiAgY2FyZERlbGV0ZUJ0blNlbGVjdG9yOiBcIi5qcy1jYXJkLWRlbGV0ZVwiLFxuXG4gIHBvcHVwT3BlbmVkU2VsZWN0b3I6IFwiLnBvcHVwX29wZW5lZFwiLFxuICBwb3B1cFByb2ZpbGVTZWxlY3RvcjogXCIuanMtcG9wdXAtcHJvZmlsZVwiLFxuICBwb3B1cE5ld0NhcmRTZWxlY3RvcjogXCIuanMtcG9wdXAtY2FyZFwiLFxuICBwb3B1cFByZXZpZXdTZWxlY3RvcjogXCIuanMtcG9wdXAtcGxhY2VcIixcbiAgcG9wdXBDb25maXJtU2VsZWN0b3I6IFwiLmpzLXBvcHVwLWFyZXlvdXN1cmVcIixcbiAgcG9wdXBBdmF0YXJTZWxlY3RvcjogXCIuanMtcG9wdXAtYXZhdGFyXCIsXG5cbiAgZm9ybVByb2ZpbGVTZWxlY3RvcjogXCIuanMtZm9ybS1wcm9maWxlXCIsXG4gIGZvcm1DYXJkU2VsZWN0b3I6IFwiLmpzLWZvcm0tY2FyZFwiLFxuICBmb3JtQ29uZmlybVNlbGVjdG9yOiBcIi5qcy1mb3JtLWFyZXlvdXN1cmVcIixcbiAgZm9ybUF2YXRhclNlbGVjdG9yOiBcIi5qcy1mb3JtLWF2YXRhclwiLFxuXG4gIHByZXZpZXdJbWFnZVNlbGVjdG9yOiBcIi5wcmV2aWV3X19pbWFnZVwiLFxuICBwcmV2aWV3VGl0bGVTZWxlY3RvcjogXCIucHJldmlld19fdGl0bGVcIixcblxuICBidXR0b25FZGl0UHJvZmlsZVNlbGVjdG9yOiBcIi5idXR0b25fZWRpdFwiLFxuICBidXR0b25BZGRDYXJkU2VsZWN0b3I6IFwiLmJ1dHRvbl9hZGRcIixcbiAgYnV0dG9uRWRpdEF2YXRhclNlbGVjdG9yOiBcIi5qcy1lZGl0LWF2YXRhclwiLFxuICBidXR0b25TYXZlU2VsZWN0b3I6IFwiLmJ1dHRvbl9zYXZlXCIsXG4gIGJ1dHRvblNhdmVEaXNhYmxlZDogXCIuYnV0dG9uX2Rpc2FibGVkXCIsXG5cbiAgaW5wdXRQcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5mb3JtX19wcm9maWxlLW5hbWVcIixcbiAgaW5wdXRQcm9maWxlSW5mb1NlbGVjdG9yOiBcIi5mb3JtX19wcm9maWxlLWpvYlwiLFxuICBpbnB1dFByb2ZpbGVBdmF0YXJTZWxlY3RvcjogXCIuZm9ybV9fYXZhdGFyLXVybFwiLFxuXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3BlcnNvblwiLFxuICBwcm9maWxlQWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fam9iXCIsXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXG59O1xuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLnVybCA9IGNvbmZpZy51cmw7XG4gICAgdGhpcy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLmhlYWRlcnMpO1xuICB9XG5cbiAgLy/Ql9Cw0LHQuNGA0LDQtdC8INCy0YHQtSDQutCw0YDRgtC+0YfQutC4XG4gIGdldENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH1jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCDQv9C+0LvRg9GH0LXQvdC40Y8g0LrQsNGA0YLQvtGH0LXQujogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gdGhpcy5fZGlzcGxheUVycihlcnIpKTtcbiAgfVxuXG4gIC8v0J/QvtC70YPRh9Cw0LXQvCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfXVzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICBg0J7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LU6ICR7cmVzLnN0YXR1c31gXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHRoaXMuX2Rpc3BsYXlFcnIoZXJyKSk7XG4gIH1cblxuICAvL9C+0LHQvdC+0LLQu9GP0LXQvCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcbiAgdXBkYXRlVXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9dXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICBg0J7RiNC40LHQutCwINC00L7QsdCw0LLQu9C10L3QuNGPINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtTogJHtyZXMuc3RhdHVzfWBcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHRoaXMuX2Rpc3BsYXlFcnIoZXJyKSk7XG4gIH1cblxuICAvL9CU0L7QsdCw0LLQu9GP0LXQvCDQvdC+0LLQvtC1INC80LXRgdGC0L5cbiAgY3JlYXRlTmV3UGxhY2UobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH1jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICAgIGDQntGI0LjQsdC60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4OiAke3Jlcy5zdGF0dXN9YFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gdGhpcy5fZGlzcGxheUVycihlcnIpKTtcbiAgfVxuXG4gIC8v0KPQtNCw0LvRj9C10Lwg0LrQsNGA0YLQvtGH0LrRg1xuICBkZWxldGVNeVBsYWNlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfWNhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICAgICAgYNCe0YjQuNCx0LrQsCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LggJHtpZH0g0LrQsNGA0YLQvtGH0LrQuDogJHtyZXMuc3RhdHVzfWBcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHRoaXMuX2Rpc3BsYXlFcnIoZXJyKSk7XG4gIH1cblxuICAvL9Ch0YLQsNCy0LjQvCDQu9Cw0LnQulxuICBsaWtlQ2FyZChpZCwgbWV0aG9kKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfWNhcmRzL2xpa2VzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwINC70LDQudC60LDQvdGM0Y8gJHtpZH0g0LrQsNGA0YLQvtGH0LrQuDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gdGhpcy5fZGlzcGxheUVycihlcnIpKTtcbiAgfVxuXG4gIC8v0KHRgtCw0LLQuNC8INC90L7QstGL0Lkg0LDQstCw0YLQsNGAXG4gIGNoYW5nZUF2YXRhcihhdmF0YXJVcmwpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9dXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogYXZhdGFyVXJsLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwINC30LDQvNC10L3RiyDQsNCy0LDRgtCw0YDQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gdGhpcy5fZGlzcGxheUVycihlcnIpKTtcbiAgfVxuXG4gIF9kaXNwbGF5RXJyKGVycikge1xuICAgIGFsZXJ0KGVycik7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JzKSB7XG4gICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gc2VsZWN0b3JzLm5hbWU7XG4gICAgdGhpcy5faW5mb1NlbGVjdG9yID0gc2VsZWN0b3JzLmluZm87XG4gICAgdGhpcy5fYXZhdGFyU2VsZWN0b3IgPSBzZWxlY3RvcnMuYXZhdGFyO1xuXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9pbmZvU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBpbmZvOiB0aGlzLl9pbmZvLnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBpbmZvKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5faW5mby50ZXh0Q29udGVudCA9IGluZm87XG4gIH1cbiAgaW5pdFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dCk7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyO1xuICAgIHRoaXMuX2F2YXRhci5hbHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5pZCA9IGRhdGEuX2lkO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLml0ZW1zID0gaXRlbXM7XG5cbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgfVxuXG4gIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnRuU2VsZWN0b3IgPSBcIi5idXR0b25fY2xvc2VcIjtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVyKCkge1xuICAgIC8v0JfQsNC60YDRi9GC0LjQtSDQv9C+INC/0YPRgdGC0L7QvNGDINC80LXRgdGC0YNcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX3NlbGVjdG9yLnNsaWNlKDEpKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvL9CX0LDQutGA0YvRgtC40LUg0L/QviDQutC90L7Qv9C60LVcbiAgICBjb25zdCBjbG9zZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jbG9zZUJ0blNlbGVjdG9yKTtcbiAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCB0aXRsZSwgbGluaykge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2lhbWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsaW5rKTtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZSk7XG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVyKCk7XG4gIH1cblxuICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICB0aGlzLl9pYW1nZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2lhbWdlLmFsdCA9IG5hbWU7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHNlbGVjdG9yLCBzdWJtaXRGbmMgfSwgZm9ybVNlbGVjdG9yKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fc3VibWl0Rm5jID0gc3VibWl0Rm5jO1xuXG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybVNlbGVjdG9yKTtcblxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcigpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVyKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0KCk7XG4gICAgfSk7XG4gIH1cblxuICBfc3VibWl0KCkge1xuICAgIHRoaXMuX3N1Ym1pdEZuYyh0aGlzLl9pZENhcmQpO1xuICB9XG5cbiAgb3BlbihpZCkge1xuICAgIHRoaXMuX2lkQ2FyZCA9IGlkO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgc2VsZWN0b3JzU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvZGF0YVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgaWQsXG4gICAgZGF0YSxcbiAgICBzZWxlY3RvcnMsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZUNhcmREZWxldGUsXG4gICAgaGFuZGxlQ2FyZExpa2VcbiAgKSB7XG4gICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAvL2NvbnNvbGUubG9nKE9iamVjdC52YWx1ZXMoZGF0YS5saWtlcykpO1xuXG4gICAgdGhpcy5fbXlJZCA9IGlkO1xuXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VDb3VudCA9IDA7XG5cbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5faWRDYXJkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5saWtlc09iaiA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fbGlrZUNvdW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG5cbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcblxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JzLmNhcmRUcGxTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkVGl0bGVTZWxlY3RvciA9IHNlbGVjdG9ycy5jYXJkVGl0bGVTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkUGljU2VsZWN0b3IgPSBzZWxlY3RvcnMuY2FyZFBpY1NlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmRMaWtlQnRuU2VsZWN0b3IgPSBzZWxlY3RvcnMuY2FyZExpa2VCdG5TZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50U2VsZWN0b3IgPSBzZWxlY3RvcnMuY2FyZExpa2VDb3VudFNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmREZWxldGVCdG5TZWxlY3RvciA9IHNlbGVjdG9ycy5jYXJkRGVsZXRlQnRuU2VsZWN0b3I7XG4gIH1cblxuICBoYXNNeUxpa2UoKSB7XG4gICAgaWYgKFxuICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmxpa2VzT2JqKS5zb21lKChlbGVtZW50KSA9PiBlbGVtZW50Ll9pZCA9PT0gdGhpcy5fbXlJZClcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldENhcmRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQuaWQgPSB0aGlzLl9pZENhcmQ7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRQaWNTZWxlY3Rvcikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jYXJkVGl0bGVTZWxlY3RvclxuICAgICkudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRTZWxlY3RvclxuICAgICkudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlQ291bnQ7XG5cbiAgICBpZiAoIXRoaXMuX2l0c015Q2FyZCgpKSB7XG4gICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmREZWxldGVCdG5TZWxlY3RvcilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJidXR0b25fdmlzaWJpbGl0eV9oaWRkZW5cIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzTXlMaWtlKCkpIHtcbiAgICAgIHRoaXMuX2xpa2UoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfbGlrZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkTGlrZUJ0blNlbGVjdG9yKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJidXR0b25fbGlrZS1pc3NldFwiKTtcbiAgfVxuXG4gIHNldExpa2VDb3VudChjb3VudCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRTZWxlY3RvclxuICAgICkudGV4dENvbnRlbnQgPSBjb3VudDtcbiAgfVxuXG4gIF9nZXRDYXJkVGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC1pdGVtXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgX2l0c015Q2FyZCgpIHtcbiAgICBpZiAodGhpcy5fbXlJZCA9PT0gdGhpcy5fb3duZXJJZCkgcmV0dXJuIHRydWU7XG4gICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX2xpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSgpO1xuICAgICAgICB0aGlzLl9saWtlKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtaXRlbV9fcGljXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmpzLWNhcmQtZGVsZXRlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSgpO1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVNlbGVjdG9yKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZGlzYWJsZVNhdmVCdG4oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBfZGlzYWJsZVNhdmVCdG4oKSB7XG4gICAgY29uc3Qgc2F2ZUJ0biA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzW1wic3VibWl0QnV0dG9uU2VsZWN0b3JcIl1cbiAgICApO1xuICAgIHNhdmVCdG4uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzW1wiaW5wdXRTZWxlY3RvclwiXSlcbiAgICApO1xuICAgIHRoaXMuX3NhdmVCdG4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5nc1tcInN1Ym1pdEJ1dHRvblNlbGVjdG9yXCJdXG4gICAgKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2lucHV0SXNWYWxpZChpbnB1dEVsZW1lbnQpIHtcbiAgICByZXR1cm4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9XG5cbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLl9pbnB1dElzVmFsaWQoaW5wdXRFbGVtZW50KSkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dHMpKSB7XG4gICAgICB0aGlzLl9zYXZlQnRuLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3NbXCJpbmFjdGl2ZUJ1dHRvbkNsYXNzXCJdKTtcbiAgICAgIHRoaXMuX3NhdmVCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zYXZlQnRuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3NbXCJpbmFjdGl2ZUJ1dHRvbkNsYXNzXCJdKTtcbiAgICAgIHRoaXMuX3NhdmVCdG4ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzLnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgaW5wdXRJZCA9IGlucHV0RWxlbWVudC5pZDtcblxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0SWR9LWVycm9yYCk7XG5cbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG5cbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5nc1tcImVycm9yQ2xhc3NcIl0pO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzW1wiaW5wdXRFcnJvckNsYXNzXCJdKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBpbnB1dElkID0gaW5wdXRFbGVtZW50LmlkO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0SWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5nc1tcImVycm9yQ2xhc3NcIl0pO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3NbXCJpbnB1dEVycm9yQ2xhc3NcIl0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBzZWxlY3Rvciwgc3VibWl0Rm5jIH0sIGZvcm0pIHtcbiAgICBzdXBlcihzZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9zdWJtaXRGbmMgPSBzdWJtaXRGbmM7XG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybSk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVyKCk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IFtdO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVyKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXIoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9zdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zdWJtaXQoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgdGhpcy5fc3VibWl0Rm5jKGZvcm1WYWx1ZXMpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBhcGlTZXR0aW5ncyxcbiAgdmFsaWRhdG9yU2V0dGluZ3MsXG4gIHNlbGVjdG9yc1NldHRpbmdzLFxufSBmcm9tIFwiLi4vdXRpbHMvZGF0YS5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XG5cbi8v0JrQvdC+0LrQuCDQvdCwINGB0YLRgNCw0L3QuNGG0LVcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBzZWxlY3RvcnNTZXR0aW5ncy5idXR0b25FZGl0UHJvZmlsZVNlbGVjdG9yXG4pO1xuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIHNlbGVjdG9yc1NldHRpbmdzLmJ1dHRvbkFkZENhcmRTZWxlY3RvclxuKTtcbmNvbnN0IGVkaXRBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBzZWxlY3RvcnNTZXR0aW5ncy5idXR0b25FZGl0QXZhdGFyU2VsZWN0b3Jcbik7XG5cbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIHNlbGVjdG9yc1NldHRpbmdzLmlucHV0UHJvZmlsZU5hbWVTZWxlY3RvclxuKTtcbmNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgc2VsZWN0b3JzU2V0dGluZ3MuaW5wdXRQcm9maWxlSW5mb1NlbGVjdG9yXG4pO1xuY29uc3QgYXZhdGFySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBzZWxlY3RvcnNTZXR0aW5ncy5pbnB1dFByb2ZpbGVBdmF0YXJTZWxlY3RvclxuKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIHVybDogYXBpU2V0dGluZ3MudXJsLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogYXBpU2V0dGluZ3MudG9rZW4sXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy/QntGC0L7QsdGA0LDQttC10L3QuNC1INC30LDQs9GA0YPQt9C60Lgg0LTQsNC90L3Ri9GFXG5mdW5jdGlvbiBjaGFuZ2VCdG5MYWJlbChuZXdMYWJlbCkge1xuICBjb25zdCBjaGFuZ2VCdG4gPSBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc1NldHRpbmdzLnBvcHVwT3BlbmVkU2VsZWN0b3IpXG4gICAgLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzU2V0dGluZ3MuYnV0dG9uU2F2ZVNlbGVjdG9yKTtcbiAgY2hhbmdlQnRuLnRleHRDb250ZW50ID0gbmV3TGFiZWw7XG4gIGlmIChuZXdMYWJlbCA9PT0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiKSB7XG4gICAgY2hhbmdlQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBjaGFuZ2VCdG4uY2xhc3NMaXN0LmFkZChzZWxlY3RvcnNTZXR0aW5ncy5idXR0b25TYXZlRGlzYWJsZWQuc2xpY2UoMSkpO1xuICB9IGVsc2Uge1xuICAgIGNoYW5nZUJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGNoYW5nZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9yc1NldHRpbmdzLmJ1dHRvblNhdmVEaXNhYmxlZC5zbGljZSgxKSk7XG4gIH1cbn1cblxuLy/Qn9C+0LvRjNC30L7QstCw0YLQtdC70YxcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZTogc2VsZWN0b3JzU2V0dGluZ3MucHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgaW5mbzogc2VsZWN0b3JzU2V0dGluZ3MucHJvZmlsZUFib3V0U2VsZWN0b3IsXG4gIGF2YXRhcjogc2VsZWN0b3JzU2V0dGluZ3MucHJvZmlsZUF2YXRhclNlbGVjdG9yLFxufSk7XG5cbi8v0LfQsNCz0YDRg9C20LDQtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuZnVuY3Rpb24gaW5pdFVzZXJJbmZvKCkge1xuICBhcGkuZ2V0VXNlckluZm8oKS50aGVuKChkYXRhKSA9PiB7XG4gICAgdXNlckluZm8uaW5pdFVzZXJJbmZvKGRhdGEpO1xuICB9KTtcbn1cblxuY29uc3QgaW5zQ2FyZHMgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiB7fSxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgIGluc0NhcmRzLmFkZEl0ZW0obmV3Q2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIHNlbGVjdG9yc1NldHRpbmdzLmNhcmRzU2VsZWN0b3Jcbik7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIFByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldENhcmRzKCldKVxuICAgIC50aGVuKChbdXNlckRhdGEsIGluaXRpYWxDYXJkc10pID0+IHtcbiAgICAgIHVzZXJJbmZvLmluaXRVc2VySW5mbyh1c2VyRGF0YSk7XG5cbiAgICAgIGluc0NhcmRzLml0ZW1zID0gaW5pdGlhbENhcmRzO1xuICAgICAgaW5zQ2FyZHMucmVuZGVySXRlbXMoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBhbGVydChg0JLQvdC40LzQsNC90LjQtSEg0J/RgNC4INC30LDQs9GD0LfQutC1INC00LDQvdC90YvRhSDQv9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vyci5tZXNzYWdlKCl9YCk7XG4gICAgfSk7XG59XG4vL9Ch0L7Qt9C00LDQtdC8INC60LDRgNGC0L7Rh9C60YNcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXG4gICAgdXNlckluZm8uaWQsXG4gICAgaXRlbSxcbiAgICBzZWxlY3RvcnNTZXR0aW5ncyxcbiAgICAoaGFuZGxlQ2FyZENsaWNrKSA9PiB7XG4gICAgICBwb3B1cFBsYWNlLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xuICAgIH0sXG4gICAgKGhhbmRsZUNhcmREZWxldGUpID0+IHtcbiAgICAgIHBvcHVwQ29uZmlybS5vcGVuKGl0ZW0uX2lkKTtcbiAgICB9LFxuICAgIChoYW5kbGVDYXJkTGlrZSkgPT4ge1xuICAgICAgLy/QmtCw0YDRgtC+0YfQutCwINC40LzQtdC10YIg0LzQvtC5INC70LDQudC6IC0g0YPQtNCw0LvQtdC90LjQtSDQu9Cw0LnQutCwINC/0L4g0LrQu9C40LrRg1xuICAgICAgaWYgKG5ld0NhcmQuaGFzTXlMaWtlKCkpIHtcbiAgICAgICAgYXBpLmxpa2VDYXJkKGl0ZW0uX2lkLCBcIkRFTEVURVwiKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBuZXdDYXJkLnNldExpa2VDb3VudChyZXMubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICBuZXdDYXJkLmxpa2VzT2JqID0gcmVzLmxpa2VzO1xuICAgICAgICB9KTtcbiAgICAgIH0gLy/QryDQtdGJ0LUg0L3QtSDQu9Cw0LnQutCw0LsgLSDRgdGC0LDQstC40LxcbiAgICAgIGVsc2Uge1xuICAgICAgICBhcGkubGlrZUNhcmQoaXRlbS5faWQsIFwiUFVUXCIpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIG5ld0NhcmQuc2V0TGlrZUNvdW50KHJlcy5saWtlcy5sZW5ndGgpO1xuICAgICAgICAgIG5ld0NhcmQubGlrZXNPYmogPSByZXMubGlrZXM7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIG5ld0NhcmQuY3JlYXRlKCk7XG59XG5cbi8vUG9wdXAg0YEg0L/RgNC10LLRjNGOXG5jb25zdCBwb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICBzZWxlY3RvcnNTZXR0aW5ncy5wb3B1cFByZXZpZXdTZWxlY3RvcixcbiAgc2VsZWN0b3JzU2V0dGluZ3MucHJldmlld1RpdGxlU2VsZWN0b3IsXG4gIHNlbGVjdG9yc1NldHRpbmdzLnByZXZpZXdJbWFnZVNlbGVjdG9yXG4pO1xuXG4vL1BvcHVwIGMg0L/QvtC00YLQstC10YDQttC00LXQvdC40LXQvFxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oXG4gIHtcbiAgICBzZWxlY3Rvcjogc2VsZWN0b3JzU2V0dGluZ3MucG9wdXBDb25maXJtU2VsZWN0b3IsXG4gICAgc3VibWl0Rm5jOiAoaWQpID0+IHtcbiAgICAgIGNoYW5nZUJ0bkxhYmVsKFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIik7XG4gICAgICBhcGlcbiAgICAgICAgLmRlbGV0ZU15UGxhY2UoaWQpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpZiAoIXJlcy5tZXNzYWdlKSByZXR1cm4gbmV3IFByb21pc2UucmVqZWN0KFwi0J7RiNC40LHQutCwINGD0LTQsNC70LXQvdC40Y9cIik7XG5cbiAgICAgICAgICBsZXQgZGVsZXRlRUxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgICBkZWxldGVFTGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkLWl0ZW1fY2xvc2VkXCIpO1xuICAgICAgICAgIC8v0J/Qu9Cw0LDQsNCw0LDQstC90L4g0YPQtNCw0LvRj9C10Lwg0LrQsNGA0YLQvtGH0LrRg1xuICAgICAgICAgIGRlbGV0ZUVMZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlRUxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIGRlbGV0ZUVMZW1lbnQgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoZXJyKSA9PiB7XG4gICAgICAgICAgY2hhbmdlQnRuTGFiZWwoXCLQlNCwXCIpO1xuICAgICAgICAgIHBvcHVwQ29uZmlybS5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnNTZXR0aW5ncy5mb3JtQ29uZmlybVNlbGVjdG9yXG4pO1xuXG4vL9Cf0L7Qv9Cw0L8g0YEg0L/RgNC+0YTQuNC70LXQvFxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHtcbiAgICBzZWxlY3Rvcjogc2VsZWN0b3JzU2V0dGluZ3MucG9wdXBQcm9maWxlU2VsZWN0b3IsXG4gICAgc3VibWl0Rm5jOiAodmFsdWVzKSA9PiB7XG4gICAgICBjaGFuZ2VCdG5MYWJlbChcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCIpO1xuICAgICAgYXBpXG4gICAgICAgIC51cGRhdGVVc2VySW5mbyh2YWx1ZXMubmFtZSwgdmFsdWVzLmluZm8pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpbml0VXNlckluZm8oKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKHN0YXR1cykgPT4ge1xuICAgICAgICAgIGNoYW5nZUJ0bkxhYmVsKFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpO1xuICAgICAgICAgIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnNTZXR0aW5ncy5mb3JtUHJvZmlsZVNlbGVjdG9yXG4pO1xuXG4vL9Cf0L7Qv9Cw0L8g0YEg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC+0LlcbmNvbnN0IHBvcHVwTmV3Q2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICB7XG4gICAgc2VsZWN0b3I6IHNlbGVjdG9yc1NldHRpbmdzLnBvcHVwTmV3Q2FyZFNlbGVjdG9yLFxuICAgIHN1Ym1pdEZuYzogKHZhbHVlcykgPT4ge1xuICAgICAgY2hhbmdlQnRuTGFiZWwoXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiKTtcbiAgICAgIGFwaVxuICAgICAgICAuY3JlYXRlTmV3UGxhY2UodmFsdWVzLm5hbWUsIHZhbHVlcy5saW5rKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQocmVzKTtcbiAgICAgICAgICBpbnNDYXJkcy5wcmVwZW5kSXRlbShuZXdDYXJkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKHN0YXR1cykgPT4ge1xuICAgICAgICAgIGNoYW5nZUJ0bkxhYmVsKFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpO1xuICAgICAgICAgIHBvcHVwTmV3Q2FyZC5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnNTZXR0aW5ncy5mb3JtQ2FyZFNlbGVjdG9yXG4pO1xuXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICB7XG4gICAgc2VsZWN0b3I6IHNlbGVjdG9yc1NldHRpbmdzLnBvcHVwQXZhdGFyU2VsZWN0b3IsXG4gICAgc3VibWl0Rm5jOiAodmFsdWUpID0+IHtcbiAgICAgIGNoYW5nZUJ0bkxhYmVsKFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIik7XG4gICAgICBhcGlcbiAgICAgICAgLmNoYW5nZUF2YXRhcih2YWx1ZS5saW5rKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgaW5pdFVzZXJJbmZvKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KChzdGF0dXMpID0+IHtcbiAgICAgICAgICBjaGFuZ2VCdG5MYWJlbChcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcbiAgICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnNTZXR0aW5ncy5mb3JtQXZhdGFyU2VsZWN0b3Jcbik7XG5cbmZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICBhZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgcG9wdXBOZXdDYXJkLm9wZW4oKTtcbiAgfSk7XG5cbiAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGNvbnN0IGdldFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBnZXRVc2VySW5mby5uYW1lO1xuICAgIG5hbWVJbnB1dC5mb2N1cygpO1xuICAgIGpvYklucHV0LnZhbHVlID0gZ2V0VXNlckluZm8uaW5mbztcbiAgICBwb3B1cFByb2ZpbGUub3BlbigpO1xuICB9KTtcblxuICBlZGl0QXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgY29uc3QgZ2V0VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAgIGF2YXRhcklucHV0LnZhbHVlID0gZ2V0VXNlckluZm8uYXZhdGFyO1xuICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcbiAgfSk7XG59XG5cbi8vaW5pdFVzZXJJbmZvKCk7XG5pbml0KCk7XG5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCB2YWxpZGF0ZVByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdG9yU2V0dGluZ3MsXG4gIHNlbGVjdG9yc1NldHRpbmdzLmZvcm1Qcm9maWxlU2VsZWN0b3Jcbik7XG52YWxpZGF0ZVByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCB2YWxpZGF0ZUF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0b3JTZXR0aW5ncyxcbiAgc2VsZWN0b3JzU2V0dGluZ3MuZm9ybUF2YXRhclNlbGVjdG9yXG4pO1xuICAgIHZhbGlkYXRlQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuICAgIGNvbnN0IHZhbGlkYXRlQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRvclNldHRpbmdzLCBzZWxlY3RvcnNTZXR0aW5ncy5mb3JtQ2FyZFNlbGVjdG9yKTtcbiAgICB2YWxpZGF0ZUNhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=