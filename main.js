!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=[{name:"Алтай",link:n.p+"./images/photo1.jpg"},{name:"Крым",link:n.p+"./images/photo2.jpg"},{name:"Териберка",link:n.p+"./images/photo3.jpg"},{name:"Калининград",link:n.p+"./images/photo4.jpg"},{name:"Камчатка",link:n.p+"./images/photo5.png"},{name:"Башкирия",link:n.p+"./images/photo6.jpg"}],o={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".button_save",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_active"},i=".cards",s=".js-card-item-template",u=".js-popup-profile",c=".js-popup-card",a=".js-popup-place",l=".js-form-profile",f=".js-form-card";function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=t.name,this._infoSelector=t.info,this._name=document.querySelector(this._nameSelector),this._info=document.querySelector(this._infoSelector)}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,info:this._info.textContent}}},{key:"setUserInfo",value:function(e,t){this._name.textContent=e,this._info.textContent=t}}])&&p(t.prototype,n),r&&p(t,r),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._selector=n,this._container=document.querySelector(this._selector)}var t,n,r;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.appendChild(e)}}])&&h(t.prototype,n),r&&h(t,r),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selector=t,this._element=document.querySelector(this._selector),this._closeBtnSelector=".button_close",this._handleEscClose=function(e){"Escape"===e.key&&n.close()}}var t,n,r;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._element.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListener",value:function(){var e=this;this._element.addEventListener("click",(function(t){t.target.classList.contains(e._selector.slice(1))&&e.close()})),this._element.querySelector(this._closeBtnSelector).addEventListener("click",(function(){e.close()}))}}])&&m(t.prototype,n),r&&m(t,r),e}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=document.querySelector(".preview__image"),L=document.querySelector(".preview__title"),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,r,o=k(i);function i(e,t){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e))._link=t.link,r._name=t.name,E((n=w(r),j(i.prototype)),"setEventListener",n).call(n),r}return t=i,(n=[{key:"open",value:function(){O.src=this._link,L.textContent=this._name,O.alt=this._name,E(j(i.prototype),"open",this).call(this)}}])&&b(t.prototype,n),r&&b(t,r),i}(v);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._selector=n,this._popup=r}var t,n,r;return t=e,(n=[{key:"create",value:function(){return this._element=this._getCardTemplate(),this._element.querySelector(".card-item__pic").src=this._link,this._element.querySelector(".card-item__title").textContent=this._name,this._setEventListeners(),this._element}},{key:"_like",value:function(e){e.classList.toggle("button_like-isset")}},{key:"_remove",value:function(){var e=this;this._element.classList.toggle("card-item_closed"),this._element.addEventListener("transitionend",(function(){e._element.remove(),e._element=null}))}},{key:"_preview",value:function(){this._popup()}},{key:"_getCardTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card-item").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".button_like").addEventListener("click",(function(t){e._like(t.target)})),this._element.querySelector(".card-item__pic").addEventListener("click",(function(){e._preview()})),this._element.querySelector(".js-card-delete").addEventListener("click",(function(){e._remove()}))}}])&&q(t.prototype,n),r&&q(t,r),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._formSelector=n,this._form=document.querySelector(this._formSelector)}var t,n,r;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._disableSaveBtn()})),this._setEventListeners()}},{key:"_disableSaveBtn",value:function(){var e=this._form.querySelector(this._settings.submitButtonSelector);e.classList.add(this._settings.inactiveButtonClass),e.disabled=!0}},{key:"_setEventListeners",value:function(){var e=this;this._inputs=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._saveBtn=this._form.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputs.forEach((function(t){t.addEventListener("input",(function(){e._checkValidity(t),e._toggleButtonState()}))}))}},{key:"_inputIsValid",value:function(e){return e.validity.valid}},{key:"_checkValidity",value:function(e){this._inputIsValid(e)?this._hideInputError(e):this._showInputError(e)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputs)?(this._saveBtn.classList.add(this._settings.inactiveButtonClass),this._saveBtn.disabled=!0):(this._saveBtn.classList.remove(this._settings.inactiveButtonClass),this._saveBtn.removeAttribute("disabled"))}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e){var t=e.id,n=document.querySelector("#".concat(t,"-error"));n.textContent=e.validationMessage,n.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=e.id,n=document.querySelector("#".concat(t,"-error"));n.textContent="",n.classList.remove(this._settings.errorClass),e.classList.remove(this._settings.inputErrorClass)}}])&&I(t.prototype,n),r&&I(t,r),e}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,r,o=D(i);function i(e,t){var n,r=e.selector,s=e.submitFnc;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,r))._submit=s,n._form=document.querySelector(t),n.setEventListener(),n}return t=i,(n=[{key:"open",value:function(){T(A(i.prototype),"open",this).call(this)}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".form__input"),this._formValues=[],this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListener",value:function(){var e=this;T(A(i.prototype),"setEventListener",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submit(),e.close()}))}},{key:"close",value:function(){this._form.reset(),T(A(i.prototype),"close",this).call(this)}}])&&x(t.prototype,n),r&&x(t,r),i}(v),F=document.querySelector(".button_edit"),N=document.querySelector(".button_add"),z=document.querySelector(".form__profile-name"),G=document.querySelector(".form__profile-job");function H(e){var t=new y({items:e,renderer:function(e){var n=new P(e,s,(function(t){new C(a,e).open()})).create();t.addItem(n)}},i);t.renderItems()}var J=new _({name:".profile__person",info:".profile__job"}),K=new U({selector:u,submitFnc:function(e){var t=K._getInputValues();J.setUserInfo(t.name,t.info)}},l);N.addEventListener("click",(function(e){Q.open()})),F.addEventListener("click",(function(e){var t=J.getUserInfo();z.value=t.name,z.focus(),G.value=t.info,K.open()}));var Q=new U({selector:c,submitFnc:function(e){var t;H([{name:(t=Q._getInputValues()).name,link:t.link}])}},f);H(r),new B(o,".js-form-profile").enableValidation(),new B(o,".js-form-card").enableValidation()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9waG90bzEuanBnIiwid2VicGFjazovLy8uL3NyYy91dGlscy9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvcGhvdG8yLmpwZyIsIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3Bob3RvMy5qcGciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9waG90bzQuanBnIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvcGhvdG81LnBuZyIsIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3Bob3RvNi5qcGciLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJpbml0aWFsQ2FyZHMiLCJsaW5rIiwidmFsaWRhdG9yU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInNlbGVjdG9yc1NldHRpbmdzIiwiVXNlckluZm8iLCJzZWxlY3RvcnMiLCJ0aGlzIiwiX25hbWVTZWxlY3RvciIsIl9pbmZvU2VsZWN0b3IiLCJpbmZvIiwiX25hbWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaW5mbyIsInRleHRDb250ZW50IiwiU2VjdGlvbiIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9zZWxlY3RvciIsIl9jb250YWluZXIiLCJmb3JFYWNoIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsIlBvcHVwIiwiX2VsZW1lbnQiLCJfY2xvc2VCdG5TZWxlY3RvciIsIl9oYW5kbGVFc2NDbG9zZSIsImV2dCIsImNsb3NlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsInNsaWNlIiwiaW1hZ2VQcmV2aWV3IiwidGl0bGVQcmV2aWV3IiwiUG9wdXBXaXRoSW1hZ2UiLCJkYXRhIiwiX2xpbmsiLCJzcmMiLCJhbHQiLCJDYXJkIiwicG9wdXBGbmMiLCJfcG9wdXAiLCJfZ2V0Q2FyZFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidG9nZ2xlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlIiwiX3ByZXZpZXciLCJfcmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiX3NldHRpbmdzIiwiX2Zvcm1TZWxlY3RvciIsIl9mb3JtIiwicHJldmVudERlZmF1bHQiLCJfZGlzYWJsZVNhdmVCdG4iLCJzYXZlQnRuIiwiZGlzYWJsZWQiLCJfaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zYXZlQnRuIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrVmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2lucHV0SXNWYWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzb21lIiwiaW5wdXRJZCIsImlkIiwiZXJyb3JFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybSIsInN1Ym1pdEZuYyIsIl9zdWJtaXQiLCJzZXRFdmVudExpc3RlbmVyIiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJyZXNldCIsImVkaXRCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJtYWtlQ2FyZCIsImluc0NhcmRzIiwibmV3Q2FyZEVsZW1lbnQiLCJoYW5kbGVDYXJkQ2xpY2siLCJvcGVuIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwidXNlckluZm8iLCJwb3B1cFByb2ZpbGUiLCJpbnNWYWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJzZXRVc2VySW5mbyIsInBvcHVwTmV3Q2FyZCIsImdldFVzZXJJbmZvIiwiZm9jdXMiLCJlbmFibGVWYWxpZGF0aW9uIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUks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QVN5RixFQUFTcEYsR0FFZCxJQUFNcUYsRUFBVyxJQUFJdkYsRUFBUSxDQUNyQkUsTUFBT0EsRUFDUEMsU0FBVSxTQUFDTSxHQUVQLElBTU0rRSxFQU5VLElBQUl2RCxFQUFLeEIsRUFBTXJCLEdBQzNCLFNBQUNxRyxHQUNzQixJQUFJN0QsRUFBZXhDLEVBQXdDcUIsR0FDbkVpRixVQUdZekgsU0FDL0JzSCxFQUFTSSxRQUFRSCxLQUd6QnBHLEdBRUptRyxFQUFTSyxjQUliLElBQU1DLEVBQVcsSUFBSXhHLEVBQVMsQ0FBQ25DLEtBQU0sbUJBQW9Cd0MsS0FBTSxrQkFDekRvRyxFQUFlLElBQUlyQixFQUNyQixDQUNJeEUsU0FBVWIsRUFDVnVGLFVBQVcsU0FBQzNELEdBQ1IsSUFBTStFLEVBQVlELEVBQWFFLGtCQUMvQkgsRUFBU0ksWUFBWUYsRUFBVTdJLEtBQU02SSxFQUFVckcsUUFHdkROLEdBS0orRixFQUFjL0QsaUJBQWlCLFNBQVMsU0FBQ0osR0FDckNrRixFQUFhUixVQUdqQlIsRUFBVzlELGlCQUFpQixTQUFTLFNBQUNKLEdBQ2xDLElBQU1tRixFQUFjTixFQUFTTSxjQUU3QmYsRUFBVXhILE1BQVF1SSxFQUFZakosS0FDOUJrSSxFQUFVZ0IsUUFDVmYsRUFBU3pILE1BQVF1SSxFQUFZekcsS0FDN0JvRyxFQUFhSixVQUdqQixJQUFNUSxFQUFlLElBQUl6QixFQUNyQixDQUNJeEUsU0FBVWIsRUFDVnVGLFVBQVcsU0FBQzNELEdBQ1IsSUFBSStFLEVBT0pULEVBSmlCLENBQUMsQ0FDZHBJLE1BSEo2SSxFQUFZRyxFQUFhRixtQkFHTDlJLEtBQ2hCMEIsS0FBTW1ILEVBQVVuSCxVQUs1QlEsR0FFSmtHLEVBQVMzRyxHQUVlLElBQUlpRSxFQUFjL0QsRUFBbUIsb0JBQzdDd0gsbUJBRUssSUFBSXpELEVBQWMvRCxFQUFtQixpQkFDN0N3SCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIi4vaW1hZ2VzL3Bob3RvMS5qcGdcIjsiLCJpbXBvcnQgcGljMSBmcm9tICcuLi9pbWFnZXMvcGhvdG8xLmpwZyc7XHJcbmltcG9ydCBwaWMyIGZyb20gJy4uL2ltYWdlcy9waG90bzIuanBnJztcclxuaW1wb3J0IHBpYzMgZnJvbSAnLi4vaW1hZ2VzL3Bob3RvMy5qcGcnO1xyXG5pbXBvcnQgcGljNCBmcm9tICcuLi9pbWFnZXMvcGhvdG80LmpwZyc7XHJcbmltcG9ydCBwaWM1IGZyb20gJy4uL2ltYWdlcy9waG90bzUucG5nJztcclxuaW1wb3J0IHBpYzYgZnJvbSAnLi4vaW1hZ2VzL3Bob3RvNi5qcGcnO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9CQ0LvRgtCw0LknLFxyXG4gICAgICAgIGxpbms6IHBpYzFcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Ca0YDRi9C8JyxcclxuICAgICAgICBsaW5rOiBwaWMyXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfQotC10YDQuNCx0LXRgNC60LAnLFxyXG4gICAgICAgIGxpbms6IHBpYzNcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Ca0LDQu9C40L3QuNC90LPRgNCw0LQnLFxyXG4gICAgICAgIGxpbms6IHBpYzRcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgICAgIGxpbms6IHBpYzVcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9CR0LDRiNC60LjRgNC40Y8nLFxyXG4gICAgICAgIGxpbms6IHBpYzZcclxuICAgIH0sXHJcbl07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRvclNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5idXR0b25fc2F2ZScsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2Rpc2FibGVkJyxcclxuICAgIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ2Zvcm1fX2Vycm9yX2FjdGl2ZSdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnNTZXR0aW5ncyA9IHtcclxuICAgIGNhcmRzU2VsZWN0b3I6ICcuY2FyZHMnLFxyXG4gICAgY2FyZFRwbFNlbGVjdG9yOiAnLmpzLWNhcmQtaXRlbS10ZW1wbGF0ZScsXHJcbiAgICBwb3B1cFByb2ZpbGVTZWxlY3RvcjogJy5qcy1wb3B1cC1wcm9maWxlJyxcclxuICAgIHBvcHVwTmV3Q2FyZFNlbGVjdG9yOiAnLmpzLXBvcHVwLWNhcmQnLFxyXG4gICAgcG9wdXBQcmV2aWV3U2VsZWN0b3I6ICcuanMtcG9wdXAtcGxhY2UnLFxyXG4gICAgZm9ybVByb2ZpbGVTZWxlY3RvcjogJy5qcy1mb3JtLXByb2ZpbGUnLFxyXG4gICAgZm9ybUNhcmRTZWxlY3RvcjogJy5qcy1mb3JtLWNhcmQnXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIi4vaW1hZ2VzL3Bob3RvMi5qcGdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiLi9pbWFnZXMvcGhvdG8zLmpwZ1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCIuL2ltYWdlcy9waG90bzQuanBnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIi4vaW1hZ2VzL3Bob3RvNS5wbmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiLi9pbWFnZXMvcGhvdG82LmpwZ1wiOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9ycykge1xyXG4gICAgICAgIHRoaXMuX25hbWVTZWxlY3RvciA9IHNlbGVjdG9ycy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2luZm9TZWxlY3RvciA9IHNlbGVjdG9ycy5pbmZvO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX25hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5mb1NlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge25hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGluZm86IHRoaXMuX2luZm8udGV4dENvbnRlbnR9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKG5hbWUsIGluZm8pIHtcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9pbmZvLnRleHRDb250ZW50ID0gaW5mbztcclxuXHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgc2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG5cclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VCdG5TZWxlY3RvciA9ICcuYnV0dG9uX2Nsb3NlJztcclxuXHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgICAgIC8v0JfQsNC60YDRi9GC0LjQtSDQv9C+INC/0YPRgdGC0L7QvNGDINC80LXRgdGC0YNcclxuICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fc2VsZWN0b3Iuc2xpY2UoMSkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/Ql9Cw0LrRgNGL0YLQuNC1INC/0L4g0LrQvdC+0L/QutC1XHJcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2xvc2VCdG5TZWxlY3Rvcik7XHJcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jb25zdCBpbWFnZVByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJldmlld19faW1hZ2UnKTtcclxuY29uc3QgdGl0bGVQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZXZpZXdfX3RpdGxlJyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBkYXRhKSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3IpO1xyXG5cclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gICAgfVxyXG5cclxuICAgICAgICBvcGVuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGltYWdlUHJldmlldy5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgICAgICB0aXRsZVByZXZpZXcudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgICAgICBpbWFnZVByZXZpZXcuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLm9wZW4oKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgc2VsZWN0b3IsIHBvcHVwRm5jKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBwb3B1cEZuYztcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldENhcmRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtaXRlbV9fcGljJykuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWl0ZW1fX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBfbGlrZShldnQpIHtcclxuICAgICAgICBldnQuY2xhc3NMaXN0LnRvZ2dsZSgnYnV0dG9uX2xpa2UtaXNzZXQnKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVtb3ZlKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZC1pdGVtX2Nsb3NlZCcpO1xyXG4gICAgICAgIC8vINCc0L3QtSDQsdGLINGF0L7RgtC10LvQvtGB0Ywg0YHQvtGF0YDQsNC90LjRgtGMINC/0LvQsNCy0L3QvtGB0YLRjCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LgsINGPINC40LfQvNC10L3QuNC7INGB0LLQvtC50YHRgtCy0LAgY3NzINC60LvQsNGB0YHQsCwg0YHQtdC50YfQsNGBINC+0YjQuNCx0LrQuCDQvdC10YIuXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgX3ByZXZpZXcoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICBfZ2V0Q2FyZFRlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWl0ZW0nKVxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZShldnQudGFyZ2V0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1pdGVtX19waWMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcHJldmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1jYXJkLWRlbGV0ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybVNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVTYXZlQnRuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9kaXNhYmxlU2F2ZUJ0bigpIHtcclxuICAgICAgICBjb25zdCBzYXZlQnRuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3NldHRpbmdzWydzdWJtaXRCdXR0b25TZWxlY3RvciddKTtcclxuICAgICAgICBzYXZlQnRuLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5nc1snaW5wdXRTZWxlY3RvciddKSk7XHJcbiAgICAgICAgdGhpcy5fc2F2ZUJ0biA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zZXR0aW5nc1snc3VibWl0QnV0dG9uU2VsZWN0b3InXSk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfaW5wdXRJc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5faW5wdXRJc1ZhbGlkKGlucHV0RWxlbWVudCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRzKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlQnRuLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3NbJ2luYWN0aXZlQnV0dG9uQ2xhc3MnXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5nc1snaW5hY3RpdmVCdXR0b25DbGFzcyddKTtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ0bi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0cy5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBpbnB1dElkID0gaW5wdXRFbGVtZW50LmlkO1xyXG5cclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dElkfS1lcnJvcmApO1xyXG5cclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcblxyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzWydlcnJvckNsYXNzJ10pO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzWydpbnB1dEVycm9yQ2xhc3MnXSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRJZCA9IGlucHV0RWxlbWVudC5pZDtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dElkfS1lcnJvcmApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzWydlcnJvckNsYXNzJ10pO1xyXG5cclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5nc1snaW5wdXRFcnJvckNsYXNzJ10pO1xyXG4gICAgfTtcclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7c2VsZWN0b3IsIHN1Ym1pdEZuY30sIGZvcm0pIHtcclxuICAgICAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICAgICAgLy8gdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9zdWJtaXQgPSBzdWJtaXRGbmM7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybSk7XHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXIoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsIlxyXG5cclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7aW5pdGlhbENhcmRzLCB2YWxpZGF0b3JTZXR0aW5ncywgc2VsZWN0b3JzU2V0dGluZ3N9IGZyb20gJy4uL3V0aWxzL2RhdGEuanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcblxyXG5cclxuXHJcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX2VkaXQnKTtcclxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fYWRkJyk7XHJcblxyXG5cclxuXHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19wcm9maWxlLW5hbWUnKTtcclxuY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fcHJvZmlsZS1qb2InKTtcclxuXHJcblxyXG4vL9Ck0YPQvdC60YbQuNGPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LXQulxyXG5mdW5jdGlvbiBtYWtlQ2FyZChpdGVtcykge1xyXG5cclxuICAgIGNvbnN0IGluc0NhcmRzID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICAgICAgICBpdGVtczogaXRlbXMsXHJcbiAgICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChpdGVtLCBzZWxlY3RvcnNTZXR0aW5ncy5jYXJkVHBsU2VsZWN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgKGhhbmRsZUNhcmRDbGljaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9yc1NldHRpbmdzLnBvcHVwUHJldmlld1NlbGVjdG9yLCBpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBQbGFjZS5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gbmV3Q2FyZC5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGluc0NhcmRzLmFkZEl0ZW0obmV3Q2FyZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWxlY3RvcnNTZXR0aW5ncy5jYXJkc1NlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgaW5zQ2FyZHMucmVuZGVySXRlbXMoKTtcclxufVxyXG5cclxuLy9Qb3B1cCDRgSDQv9GA0L7RhNC40LvQtdC8XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtuYW1lOiAnLnByb2ZpbGVfX3BlcnNvbicsIGluZm86ICcucHJvZmlsZV9fam9iJ30pO1xyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgIHtcclxuICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3JzU2V0dGluZ3MucG9wdXBQcm9maWxlU2VsZWN0b3IsXHJcbiAgICAgICAgc3VibWl0Rm5jOiAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluc1ZhbHVlcyA9IHBvcHVwUHJvZmlsZS5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5zVmFsdWVzLm5hbWUsIGluc1ZhbHVlcy5pbmZvKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2VsZWN0b3JzU2V0dGluZ3MuZm9ybVByb2ZpbGVTZWxlY3Rvcik7XHJcblxyXG5cclxuXHJcblxyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgcG9wdXBOZXdDYXJkLm9wZW4oKTtcclxufSk7XHJcblxyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgY29uc3QgZ2V0VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICAgIG5hbWVJbnB1dC52YWx1ZSA9IGdldFVzZXJJbmZvLm5hbWU7XHJcbiAgICBuYW1lSW5wdXQuZm9jdXMoKTtcclxuICAgIGpvYklucHV0LnZhbHVlID0gZ2V0VXNlckluZm8uaW5mbztcclxuICAgIHBvcHVwUHJvZmlsZS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBOZXdDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICB7XHJcbiAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yc1NldHRpbmdzLnBvcHVwTmV3Q2FyZFNlbGVjdG9yLFxyXG4gICAgICAgIHN1Ym1pdEZuYzogKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5zVmFsdWVzID0gJyc7XHJcbiAgICAgICAgICAgIGluc1ZhbHVlcyA9IHBvcHVwTmV3Q2FyZC5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgICAgICAgbGV0IGluc1ZhbHVlc0FycmF5ID0gJyc7XHJcbiAgICAgICAgICAgIGluc1ZhbHVlc0FycmF5ID0gW3tcclxuICAgICAgICAgICAgICAgIG5hbWU6IGluc1ZhbHVlcy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgbGluazogaW5zVmFsdWVzLmxpbmssXHJcbiAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICBtYWtlQ2FyZChpbnNWYWx1ZXNBcnJheSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNlbGVjdG9yc1NldHRpbmdzLmZvcm1DYXJkU2VsZWN0b3IpO1xyXG5cclxubWFrZUNhcmQoaW5pdGlhbENhcmRzKTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRvclNldHRpbmdzLCAnLmpzLWZvcm0tcHJvZmlsZScpO1xyXG52YWxpZGF0ZVByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgdmFsaWRhdGVDYXJkID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdG9yU2V0dGluZ3MsICcuanMtZm9ybS1jYXJkJyk7XHJcbnZhbGlkYXRlQ2FyZC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==